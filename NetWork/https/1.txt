GET https://www.cnblogs.com/bwar/p/9879893.html HTTP/1.1
Host: www.cnblogs.com
User-Agent: curl/7.16.3 libcurl/7.16.3 OpenSSL/0.9.7l zlib/1.2.3
Connection: keep-alive
Accept: */*
Range: bytes=0-1024


HTTP/1.1 200 OK
Date: Mon, 10 Feb 2020 01:38:05 GMT
Content-Type: text/html; charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
Vary: Accept-Encoding

a46

<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="referrer" content="never" />
    <meta property="og:description" content="HTTPSæ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„HTTPé€šé“ï¼Œç®€å•è®²æ˜¯HTTPçš„å®‰å…¨ç‰ˆã€‚å³HTTPä¸‹åŠ å…¥SSLå±‚ï¼ŒHTTPSçš„å®‰å…¨åŸºç¡€æ˜¯SSLï¼Œå› æ­¤åŠ å¯†çš„è¯¦ç»†å†…å®¹å°±éœ€è¦SSLã€‚Nebulaæ˜¯ä¸€ä¸ªä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªå¿«é€Ÿå¼€å‘é«˜å¹¶" />
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>åŸºäºOpenSSLçš„HTTPSé€šä¿¡C++å®ç° - é“èŠ’ç®• - åšå®¢å›­</title>
    
    <link rel="stylesheet" href="/css/blog-common.min.css?v=PEqf9X5sM-TqgxEJ-34zllMNrLPY7PzC3YhmnDnLGWA" />
    <link id="MainCss" rel="stylesheet" href="/skins/darkgreentrip/bundle-darkgreentrip.min.css?v=4KE41eS1YQSSwl64fGzzTUj6ijs-YQFat4AaN-g_jxc" />
    
    <link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="/skins/darkgreentrip/bundle-darkgreentrip-mobile.min.css?v=14y836ONdWu0_jxwS0i0t1S3KjlMl55rzUI5k1qhIdc" />
    
    <link type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/bwar/rss" />
    <link type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/bwar/rsd.xml" />
    <link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/bwar/wlwmanifest.xml" />
    <script src="https://common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
    <script src="/js/blog-common.min.js?v=F-Iy-_Lj7VcUKRIvNkS6UZ5LItMqjh1_L0VZk9Yxfb8"></script>
    <script>
        var currentBlogId = 437464;
        var currentBlogApp = 'bwar';
        var cb_enable_mathjax = false;
        var isLogined = false;
    </script>
    
    
    
</head>
<body>
    <a name="top"></a>
    
    
<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
        <a id="lnkBlogLogo" href="https://www.cnblogs.com/bwar/"><img id="blogLogo" src="/skins/custom/images/logo.gif" alt="è¿”å›ä¸»é¡µ" /></a>		
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle HeaderMainTitle" href="https://www.cnblogs.com/bwar/">é“èŠ’ç®•</a>
</h1>
<h2>

</h2>




		
	</div><!--end: blogTitle åšå®¢çš„æ ‡é¢˜å’Œå‰¯æ ‡é¢˜ -->
	<div id="navigator">
		
<ul id="navList">
<li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">
åšå®¢å›­</a>
</li>
<li>
<a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/bwar/">
é¦–é¡µ</a>
</li>
<li>

<a id
aec
="blog_nav_newpost" class="menu" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">
æ–°éšç¬”</a>
</li>
<li>
<a id="blog_nav_contact" class="menu" href="https://msg.cnblogs.com/send/%E9%93%81%E8%8A%92%E7%AE%95">
è”ç³»</a></li>
<li>
<a id="blog_nav_rss" class="menu" href="https://www.cnblogs.com/bwar/rss/">
è®¢é˜…</a>
<!--<partial name="./Shared/_XmlLink.cshtml" model="Model" /></li>--></li>
<li>
<a id="blog_nav_admin" class="menu" href="https://i.cnblogs.com/">
ç®¡ç†</a>
</li>
</ul>


		<div class="blogStats">
			
			<span id="stats_post_count">éšç¬” - 
14&nbsp; </span>
<span id="stats_article_count">æ–‡ç«  - 
1&nbsp; </span>
<span id="stats-comment_count">è¯„è®º - 
35</span>

			
		</div><!--end: blogStats -->
	</div><!--end: navigator åšå®¢å¯¼èˆªæ  -->
</div><!--end: header å¤´éƒ¨ -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		<div id="post_detail">
    <!--done-->
    <div id="topics">
        <div class="post">
            <h1 class = "postTitle">
                
<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/bwar/p/9879893.html">åŸºäºOpenSSLçš„HTTPSé€šä¿¡C++å®ç°</a>

            </h1>
            <div class="clear"></div>
            <div class="postBody">
                
<div id="cnblogs_post_body" class="blogpost-body ">
    <p>&emsp;&emsp;HTTPSæ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„HTTPé€šé“ï¼Œç®€å•è®²æ˜¯HTTPçš„å®‰å…¨ç‰ˆã€‚å³HTTPä¸‹åŠ å…¥SSLå±‚ï¼ŒHTTPSçš„å®‰å…¨åŸºç¡€æ˜¯SSLï¼Œå› æ­¤åŠ å¯†çš„è¯¦ç»†å†…å®¹å°±éœ€è¦SSLã€‚<a href="https://github.com/Bwar/Nebula">Nebula</a>æ˜¯ä¸€ä¸ªä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªå¿«é€Ÿå¼€å‘é«˜å¹¶å‘ç½‘ç»œæœåŠ¡ç¨‹åºæˆ–æ­å»ºé«˜å¹¶å‘åˆ†å¸ƒå¼æœåŠ¡é›†ç¾¤çš„é«˜æ€§èƒ½äº‹ä»¶é©±åŠ¨ç½‘ç»œæ¡†æ¶ã€‚Nebulaä½œä¸ºé€šç”¨ç½‘ç»œæ¡†æ¶æä¾›HTTPSæ”¯æŒååˆ†é‡è¦ï¼ŒNebulaæ—¢å¯ç”¨ä½œhttpsæœåŠ¡å™¨ï¼Œåˆå¯ç”¨ä½œhttpså®¢æˆ·ç«¯ã€‚æœ¬æ–‡å°†ç»“åˆNebulaæ¡†æ¶çš„httpså®ç°è¯¦ç»†è®²è¿°åŸºäºopensslçš„SSLç¼–ç¨‹ã€‚å¦‚æœè§‰å¾—æœ¬æ–‡å¯¹ä½ æœ‰ç”¨ï¼Œå¸®å¿™åˆ°Nebulaçš„<a href="https://github.com/Bwar/Nebula">Github</a>æˆ–<a href="https://gitee.com/Bwar/Nebula">ç äº‘</a>ç»™ä¸ªstarï¼Œè°¢è°¢ã€‚Nebulaä¸ä»…æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œè¿˜æä¾›äº†ä¸€ç³»åˆ—åŸºäºè¿™ä¸ªæ¡†æ¶çš„åº”ç”¨ï¼Œç›®æ ‡æ˜¯æ‰“é€ ä¸€ä¸ªé«˜æ€§èƒ½åˆ†å¸ƒå¼æœåŠ¡é›†ç¾¤è§£å†³æ–¹æ¡ˆã€‚Nebulaçš„ä¸»è¦åº”ç”¨é¢†åŸŸï¼šå³æ—¶é€šè®¯ï¼ˆæˆåŠŸåº”ç”¨äºä¸€æ¬¾<a href="https://github.com/Bwar/Nebula/wiki/%E9%A6%96%E9%A1%B5">IM</a>ï¼‰ã€æ¶ˆæ¯æ¨é€å¹³å°ã€æ•°æ®å®æ—¶åˆ†æè®¡ç®—(<a href="https://github.com/Bwar/Nebio">æˆåŠŸæ¡ˆä¾‹</a>)ç­‰ï¼ŒBwarè¿˜è®¡åˆ’åŸºäºNebulaå¼€å‘çˆ¬è™«åº”ç”¨ã€‚</p>
<h3 id="h3_1">1. SSLåŠ å¯†é€šä¿¡</h3>
<p>&emsp;&emsp;HTTPSé€šä¿¡æ˜¯åœ¨TCPé€šä¿¡å±‚ä¸HTTPåº”ç”¨å±‚ä¹‹é—´å¢åŠ äº†SSLå±‚ï¼Œå¦‚æœåº”ç”¨å±‚ä¸æ˜¯HTTPåè®®ä¹Ÿæ˜¯å¯ä»¥ä½¿ç”¨SSLåŠ å¯†é€šä¿¡çš„ï¼Œæ¯”å¦‚WebSocketåè®®WSçš„åŠ ä¸ŠSSLå±‚ä¹‹åçš„WSSã€‚Nebulaæ¡†æ¶å¯ä»
aec
¥é€šè¿‡æ›´æ¢Codecè¾¾åˆ°ä¸ä¿®æ”¹ä»£ç å˜æ›´é€šè®¯åè®®ç›®çš„ï¼ŒNebulaå¢åŠ SSLæ”¯æŒåï¼Œæ‰€æœ‰Nebulaæ”¯æŒçš„é€šè®¯åè®®éƒ½æœ‰äº†SSLåŠ å¯†é€šè®¯æ”¯æŒï¼ŒåŸºäºNebulaçš„ä¸šåŠ¡ä»£ç æ— é¡»åšä»»ä½•ä¿®æ”¹ã€‚</p>
<p><img title="https_communication" src="https://oscimg.oschina.net/oscnet/73a2c1617c996e553b18b3f3558e638c76c.jpg" alt="https_communication" /></p>
<p>&emsp;&emsp;Socketè¿æ¥å»ºç«‹åçš„SSLè¿æ¥å»ºç«‹è¿‡ç¨‹ï¼š</p>
<p><img title="ssl_communication" src="https://oscimg.oschina.net/oscnet/7cb795766fac25cc3cff3e4a075311d6d3b.jpg" alt="ssl_communication" /></p>
<h3 id="h3_2">2. OpenSSL API</h3>
<p>&emsp;&emsp;OpenSSLçš„APIå¾ˆå¤šï¼Œä½†å¹¶ä¸æ˜¯éƒ½ä¼šè¢«ä½¿ç”¨åˆ°ï¼Œå¦‚æœéœ€è¦æŸ¥çœ‹æŸä¸ªAPIçš„è¯¦ç»†ä½¿ç”¨æ–¹æ³•å¯ä»¥é˜…è¯»<a href="https://www.openssl.org/docs/man1.1.0/ssl/">APIæ–‡æ¡£</a>ã€‚</p>
<h4 id="h4_3">2.1 åˆå§‹åŒ–OpenSSL</h4>
<p>&emsp;&emsp;OpenSSLåœ¨ä½¿ç”¨ä¹‹å‰ï¼Œå¿…é¡»è¿›è¡Œç›¸åº”çš„åˆå§‹åŒ–å·¥ä½œã€‚åœ¨å»ºç«‹SSLè¿æ¥ä¹‹å‰ï¼Œè¦ä¸ºClientå’ŒServeråˆ†åˆ«æŒ‡å®šæœ¬æ¬¡è¿æ¥é‡‡ç”¨çš„åè®®åŠå…¶ç‰ˆæœ¬ï¼Œç›®å‰èƒ½å¤Ÿä½¿ç”¨çš„åè®®ç‰ˆæœ¬åŒ…æ‹¬SSLv2ã€SSLv3ã€SSLv2/v3å’ŒTLSv1.0ã€‚SSLè¿æ¥è‹¥è¦æ­£å¸¸å»ºç«‹ï¼Œåˆ™è¦æ±‚Clientå’ŒServerå¿…é¡»ä½¿ç”¨ç›¸äº’å…¼å®¹çš„åè®®ã€‚ &emsp;&emsp;ä¸‹é¢æ˜¯Nebulaæ¡†æ¶SocketChannelSslImpl::SslInit()å‡½æ•°åˆå§‹åŒ–OpenSSLçš„ä»£ç ï¼Œæ ¹æ®OpenSSLçš„ä¸åŒç‰ˆæœ¬è°ƒç”¨äº†ä¸åŒçš„APIè¿›è¡Œåˆå§‹åŒ–ã€‚</p>
<pre><code class="hljs C"><span class="hljs-meta">#<span class="hljs-meta-keyword">if OPENSSL_VERSION_NUMBER &gt;= 0x10100003L

    <span class="hljs-keyword">if (OPENSSL_init_ssl(OPENSSL_INIT_LOAD_CONFIG, <span class="hljs-literal">NULL) == <span class="hljs-number">0)
    {
        pLogger-&gt;WriteLog(neb::Logger::ERROR, __FILE__, __LINE__, __FUNCTION__, <span class="hljs-string">"OPENSSL_init_ssl() failed!");
        <span class="hljs-keyword">return(ERR_SSL_INIT);
    }

    <span class="hljs-comment">/*
     * OPENSSL_init_ssl() may leave errors in the error queue
     * while returning success
     */

    ERR_clear_error();

<span class="hljs-meta">#<span class="hljs-meta-keyword">else

    OPENSSL_config(<span class="hljs-literal">NULL);

    SSL_library_init();         <span class="hljs-comment">// åˆå§‹åŒ–SSLç®—æ³•åº“å‡½æ•°( åŠ è½½è¦ç”¨åˆ°çš„ç®—æ³• )ï¼Œè°ƒç”¨SSLå‡½æ•°ä¹‹å‰å¿…é¡»è°ƒç”¨æ­¤å‡½æ•°
    SSL_load_error_strings();   <span class="hljs-comment">// é”™è¯¯ä¿¡æ¯çš„åˆå§‹åŒ–

    OpenSSL_add_all_algorithms();

<span class="hljs-meta">#<span class="hljs-meta-keyword">endif
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<h4 id="h4_4">2.2 åˆ›å»ºCTX</h4>
<p>&emsp;&emsp;CTXæ˜¯SSLä¼šè¯ç¯å¢ƒï¼Œå»ºç«‹è¿æ¥æ—¶ä½¿ç”¨ä¸åŒçš„åè®®ï¼Œå…¶CTXä¹Ÿä¸ä¸€æ ·ã€‚åˆ›å»ºCTXçš„ç›¸å…³OpenSSLå‡½æ•
15d8
°ï¼š</p>
<pre><code class="hljs C"><span class="hljs-comment">//å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯éƒ½éœ€è¦è°ƒç”¨
SSL_CTX_new();                       <span class="hljs-comment">//ç”³è¯·SSLä¼šè¯ç¯å¢ƒ

<span class="hljs-comment">//è‹¥æœ‰éªŒè¯å¯¹æ–¹è¯ä¹¦çš„éœ€æ±‚ï¼Œåˆ™éœ€è°ƒç”¨
SSL_CTX_set_verify();                <span class="hljs-comment">//æŒ‡å®šè¯ä¹¦éªŒè¯æ–¹å¼
SSL_CTX_load_verify_location();      <span class="hljs-comment">//ä¸ºSSLä¼šè¯ç¯å¢ƒåŠ è½½æœ¬åº”ç”¨æ‰€ä¿¡ä»»çš„CAè¯ä¹¦åˆ—è¡¨

<span class="hljs-comment">//è‹¥æœ‰åŠ è½½è¯ä¹¦çš„éœ€æ±‚ï¼Œåˆ™éœ€è°ƒç”¨
<span class="hljs-function"><span class="hljs-keyword">int <span class="hljs-title">SSL_CTX_use_certificate_file<span class="hljs-params">();      <span class="hljs-comment">//ä¸ºSSLä¼šè¯åŠ è½½æœ¬åº”ç”¨çš„è¯ä¹¦
<span class="hljs-function"><span class="hljs-keyword">int <span class="hljs-title">SSL_CTX_use_certificate_chain_file<span class="hljs-params">();<span class="hljs-comment">//ä¸ºSSLä¼šè¯åŠ è½½æœ¬åº”ç”¨çš„è¯ä¹¦æ‰€å±çš„è¯ä¹¦é“¾
<span class="hljs-function"><span class="hljs-keyword">int <span class="hljs-title">SSL_CTX_use_PrivateKey_file<span class="hljs-params">();       <span class="hljs-comment">//ä¸ºSSLä¼šè¯åŠ è½½æœ¬åº”ç”¨çš„ç§é’¥
<span class="hljs-function"><span class="hljs-keyword">int <span class="hljs-title">SSL_CTX_check_private_key<span class="hljs-params">();         <span class="hljs-comment">//éªŒè¯æ‰€åŠ è½½çš„ç§é’¥å’Œè¯ä¹¦æ˜¯å¦ç›¸åŒ¹é… 
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<h4 id="h4_5">2.3 åˆ›å»ºSSLå¥—æ¥å­—</h4>
<p>&emsp;&emsp;åœ¨åˆ›å»ºSSLå¥—æ¥å­—ä¹‹å‰è¦å…ˆåˆ›å»ºSocketå¥—æ¥å­—ï¼Œå»ºç«‹TCPè¿æ¥ã€‚åˆ›å»ºSSLå¥—æ¥å­—ç›¸å…³å‡½æ•°ï¼š</p>
<pre><code class="hljs C"><span class="hljs-function">SSL *<span class="hljs-title">SSl_new<span class="hljs-params">(SSL_CTX *ctx);          <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªSSLå¥—æ¥å­—
<span class="hljs-function"><span class="hljs-keyword">int <span class="hljs-title">SSL_set_fd<span class="hljs-params">(SSL *ssl, <span class="hljs-keyword">int fd);     <span class="hljs-comment">//ä»¥è¯»å†™æ¨¡å¼ç»‘å®šæµå¥—æ¥å­—
<span class="hljs-function"><span class="hljs-keyword">int <span class="hljs-title">SSL_set_rfd<span class="hljs-params">(SSL *ssl, <span class="hljs-keyword">int fd);    <span class="hljs-comment">//ä»¥åªè¯»æ¨¡å¼ç»‘å®šæµå¥—æ¥å­—
<span class="hljs-function"><span class="hljs-keyword">int <span class="hljs-title">SSL_set_wfd<span class="hljs-params">(SSL *ssl, <span class="hljs-keyword">int fd);    <span class="hljs-comment">//ä»¥åªå†™æ¨¡å¼ç»‘å®šæµå¥—æ¥å­—
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<h4 id="h4_6">2.4 å®ŒæˆSSLæ¡æ‰‹</h4>
<p>&emsp;&emsp;åœ¨è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ™®é€šTCPè¿æ¥çš„åŸºç¡€ä¸Šï¼Œå»ºç«‹SSLè¿æ¥ã€‚ä¸æ™®é€šæµå¥—æ¥å­—å»ºç«‹è¿æ¥çš„è¿‡ç¨‹ç±»ä¼¼ï¼šClientä½¿ç”¨å‡½æ•°SSL_connect()ã€ç±»ä¼¼äºæµå¥—æ¥å­—ä¸­ç”¨çš„connect()ã€‘å‘èµ·æ¡æ‰‹ï¼Œè€ŒServerä½¿ç”¨å‡½æ•°SSL_ accept()ã€ç±»ä¼¼äºæµå¥—æ¥å­—ä¸­ç”¨çš„accept()ã€‘å¯¹æ¡æ‰‹è¿›è¡Œå“åº”ï¼Œä»è€Œå®Œæˆæ¡æ‰‹è¿‡ç¨‹ã€‚ä¸¤å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs C"><span class="hljs-function"><span class="hljs-keyword">int <span class="hljs-title">SSL_connect<span class="hljs-params">(SSL *ssl);
<span class="hljs-function"><span class="hljs-keyword">int <span class="hljs-title">SSL_accept<span class="hljs-params">(SSL *ssl);
</span></span></span></span></span></span></span></span></code></pre>
<p>&emsp;&emsp;æ¡æ‰‹è¿‡ç¨‹å®Œæˆä¹‹åï¼ŒClienté€šå¸¸ä¼šè¦æ±‚Serverå‘é€è¯ä¹¦ä¿¡æ¯ï¼Œä»¥ä¾¿å¯¹Serverè¿›è¡Œé‰´åˆ«ã€‚å…¶å®ç°ä¼šç”¨åˆ°ä»¥ä¸‹ä¸¤ä¸ªå‡½æ•°:</p>
<pre><code class="hljs C"><span class="hljs-function">X509 *<span class="hljs-title">SSL_get_peer_certificate<span class="hljs-params">(SSL *ssl);  <span class="hljs-comment">//ä»SSLå¥—æ¥å­—ä¸­è·å–å¯¹æ–¹çš„è¯ä¹¦ä¿¡æ¯
<span class="hljs-function">X509_NAME *<span class="hljs-title">X509_get_subject_name<span class="hljs-params">(X509 *a); <span class="hljs-comment">//å¾—åˆ°è¯ä¹¦æ‰€ç”¨è€…çš„åå­—
</span></span></span></span></span></span></span></span></code></pre>
<h4 id="h4_7">2.5 æ•°æ®ä¼ è¾“</h4>
<p>&emsp;&emsp;ç»è¿‡å‰é¢çš„ä¸€ç³»åˆ—è¿‡ç¨‹åï¼Œå°±å¯ä»¥è¿›è¡Œå®‰å…¨çš„æ•°æ®ä¼ è¾“äº†ã€‚åœ¨æ•°æ®ä¼ è¾“é˜¶æ®µï¼Œéœ€è¦ä½¿ç”¨SSL_read( )å’ŒSSL_write( )æ¥ä»£æ›¿æ™®é€šæµå¥—æ¥å­—æ‰€ä½¿ç”¨çš„read( )å’Œwrite( )å‡½æ•°ï¼Œä»¥æ­¤å®Œæˆå¯¹SSLå¥—æ¥å­—çš„è¯»å†™æ“ä½œ,ä¸¤ä¸ªæ–°å‡½æ•°çš„åŸå‹åˆ†åˆ«å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs C"><span class="hljs-function"><span class="hljs-keyword">int <span class="hljs-title">SSL_read<span class="hljs-params">(SSL *ssl,<span class="hljs-keyword">void *buf,<span class="hljs-keyword">int num);            <span class="hljs-comment">//ä»SSLå¥—æ¥å­—è¯»å–æ•°æ®
<span class="hljs-function"><span class="hljs-keyword">int <span class="hljs-title">SSL_write<span class="hljs-params">(SSL *ssl,<span class="hljs-keyword">const <span class="hljs-keyword">void *buf,<span class="hljs-keyword">int num);     <span class="hljs-comment">//å‘SSLå¥—æ¥å­—å†™å…¥æ•°æ®
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<h4 id="h4_8">2.6 ä¼šè¯ç»“æŸ</h4>
<p>&emsp;&emsp;å½“Clientå’ŒServerä¹‹é—´çš„é€šä¿¡è¿‡ç¨‹å®Œæˆåï¼Œå°±ä½¿ç”¨ä»¥ä¸‹å‡½æ•°æ¥é‡Šæ”¾å‰é¢è¿‡ç¨‹ä¸­ç”³è¯·çš„SSLèµ„æºï¼š</p>
<pre><code class="hljs 
aec
C"><span class="hljs-function"><span class="hljs-keyword">int <span class="hljs-title">SSL_shutdown<span class="hljs-params">(SSL *ssl);       <span class="hljs-comment">//å…³é—­SSLå¥—æ¥å­—
<span class="hljs-function"><span class="hljs-keyword">void <span class="hljs-title">SSl_free<span class="hljs-params">(SSL *ssl);          <span class="hljs-comment">//é‡Šæ”¾SSLå¥—æ¥å­—
<span class="hljs-function"><span class="hljs-keyword">void <span class="hljs-title">SSL_CTX_free<span class="hljs-params">(SSL_CTX *ctx);  <span class="hljs-comment">//é‡Šæ”¾SSLä¼šè¯ç¯å¢ƒ
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre>
<h3 id="h3_9">3. SSL å’Œ TLS</h3>
<p>&emsp;&emsp;HTTPS ä½¿ç”¨ SSLï¼ˆSecure Socket Layerï¼‰ å’Œ TLSï¼ˆTransport LayerSecurityï¼‰è¿™ä¸¤ä¸ªåè®®ã€‚ SSL æŠ€æœ¯æœ€åˆæ˜¯ç”±æµè§ˆå™¨å¼€å‘å•†ç½‘æ™¯é€šä¿¡å…¬å¸ç‡å…ˆå€¡å¯¼çš„ï¼Œå¼€å‘è¿‡ SSL3.0ä¹‹å‰çš„ç‰ˆæœ¬ã€‚ç›®å‰ä¸»å¯¼æƒå·²è½¬ç§»åˆ° IETFï¼ˆInternet Engineering Task Forceï¼ŒInternet å·¥ç¨‹ä»»åŠ¡ç»„ï¼‰çš„æ‰‹ä¸­ã€‚</p>
<p>&emsp;&emsp;IETF ä»¥ SSL3.0 ä¸ºåŸºå‡†ï¼Œååˆåˆ¶å®šäº† TLS1.0ã€TLS1.1 å’Œ TLS1.2ã€‚TSL æ˜¯ä»¥SSL ä¸ºåŸå‹å¼€å‘çš„åè®®ï¼Œæœ‰æ—¶ä¼šç»Ÿä¸€ç§°è¯¥åè®®ä¸º SSLã€‚å½“å‰ä¸»æµçš„ç‰ˆæœ¬æ˜¯SSL3.0 å’Œ TLS1.0ã€‚</p>
<p>&emsp;&emsp;ç”±äº SSL1.0 åè®®åœ¨è®¾è®¡ä¹‹åˆè¢«å‘ç°å‡ºäº†é—®é¢˜ï¼Œå°±æ²¡æœ‰å®é™…æŠ•å…¥ä½¿ç”¨ã€‚SSL2.0 ä¹Ÿè¢«å‘ç°å­˜åœ¨é—®é¢˜ï¼Œæ‰€ä»¥å¾ˆå¤šæµè§ˆå™¨ç›´æ¥åºŸé™¤äº†è¯¥åè®®ç‰ˆæœ¬ã€‚</p>
<h3 id="h3_10">4. Nebulaä¸­çš„SSLé€šè®¯å®ç°</h3>
<p>&emsp;&emsp;Nebulaæ¡†æ¶åŒæ—¶æ”¯æŒSSLæœåŠ¡ç«¯åº”ç”¨å’ŒSSLå®¢æˆ·ç«¯åº”ç”¨ï¼Œå¯¹opensslçš„åˆå§‹åŒ–åªéœ€è¦åˆå§‹åŒ–ä¸€æ¬¡å³å¯ï¼ˆSslInit()åªéœ€è°ƒç”¨ä¸€æ¬¡ï¼‰ã€‚Nebulaæ¡†æ¶çš„SSLç›¸å…³ä»£ç ï¼ˆåŒ…æ‹¬å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„å®ç°ï¼‰éƒ½å°è£…åœ¨<a href="https://github.com/Bwar/Nebula/blob/master/src/channel/SocketChannelSslImpl.hpp">SocketChannelSslImpl</a>è¿™ä¸ªç±»ä¸­ã€‚Nebulaçš„SSLé€šä¿¡æ˜¯åŸºäºå¼‚æ­¥éé˜»å¡çš„socketé€šä¿¡ï¼Œå¹¶ä¸”ä¸ä½¿ç”¨opensslçš„BIOï¼ˆå› ä¸ºæ²¡æœ‰å¿…è¦ï¼Œä»£ç è¿˜æ›´å¤æ‚äº†ï¼‰ã€‚</p>
<p>&emsp;&emsp;SocketChannelSslImplæ˜¯<a href="https://github.com/Bwar/Nebula/blob/master/src/channel/SocketChannelImpl.hpp">SocketChannelImpl</a>çš„æ´¾ç”Ÿç±»ï¼Œåœ¨SocketChannelImplå¸¸è§„TCPé€šä¿¡ä¹‹ä¸Šå¢åŠ äº†SSLé€šä¿¡å±‚ï¼Œä¸¤ä¸ªç±»çš„è°ƒç”¨å‡ ä¹æ²¡æœ‰å·®å¼‚ã€‚SocketChannelSslImplç±»å£°æ˜å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs C++"><span class="hljs-class"><span class="hljs-keyword">class <span class="hljs-title">SocketChannelSslImpl : <span class="hljs-keyword">public SocketChannelImpl
{
<span class="hljs-keyword">public:
    SocketChannelSslImpl(SocketChannel* pSocketChannel, <span class="hljs-built_in">std::<span class="hljs-built_in">shared_ptr&lt;NetLogger&gt; pLogger, <span class="hljs-keyword">int iFd, uint32 ulSeq, 
aec
ev_tstamp dKeepAlive = <span class="hljs-number">0.0);
    <span class="hljs-keyword">virtual ~SocketChannelSslImpl();

    <span class="hljs-function"><span class="hljs-keyword">static <span class="hljs-keyword">int <span class="hljs-title">SslInit<span class="hljs-params">(<span class="hljs-built_in">std::<span class="hljs-built_in">shared_ptr&lt;NetLogger&gt; pLogger);
    <span class="hljs-function"><span class="hljs-keyword">static <span class="hljs-keyword">int <span class="hljs-title">SslServerCtxCreate<span class="hljs-params">(<span class="hljs-built_in">std::<span class="hljs-built_in">shared_ptr&lt;NetLogger&gt; pLogger);
    <span class="hljs-function"><span class="hljs-keyword">static <span class="hljs-keyword">int <span class="hljs-title">SslServerCertificate<span class="hljs-params">(<span class="hljs-built_in">std::<span class="hljs-built_in">shared_ptr&lt;NetLogger&gt; pLogger,
                <span class="hljs-keyword">const <span class="hljs-built_in">std::<span class="hljs-built_in">string&amp; strCertFile, <span class="hljs-keyword">const <span class="hljs-built_in">std::<span class="hljs-built_in">string&amp; strKeyFile);
    <span class="hljs-function"><span class="hljs-keyword">static <span class="hljs-keyword">void <span class="hljs-title">SslFree<span class="hljs-params">();

    <span class="hljs-function"><span class="hljs-keyword">int <span class="hljs-title">SslClientCtxCreate<span class="hljs-params">();
    <span class="hljs-function"><span class="hljs-keyword">int <span class="hljs-title">SslCreateConnection<span class="hljs-params">();
    <span class="hljs-function"><span class="hljs-keyword">int <span class="hljs-title">SslHandshake<span class="hljs-params">();
    <span class="hljs-function"><span class="hljs-keyword">int <span class="hljs-title">SslShutdown<span class="hljs-params">();

    <span class="hljs-function"><span class="hljs-keyword">virtual <span class="hljs-keyword">bool <span class="hljs-title">Init<span class="hljs-params">(E_CODEC_TYPE eCodecType, <span class="hljs-keyword">bool bIsClient = <span class="hljs-literal">false) override;

    <span class="hljs-comment">// è¦†ç›–åŸºç±»çš„Send()æ–¹æ³•ï¼Œå®ç°éé˜»å¡socketè¿æ¥å»ºç«‹åç»§ç»­å»ºç«‹SSLè¿æ¥ï¼Œå¹¶æ”¶å‘æ•°æ®
    <span class="hljs-function"><span class="hljs-keyword">virtual E_CODEC_STATUS <span class="hljs-title">Send<span class="hljs-params">() override;      
    <span class="hljs-function"><span class="hljs-keyword">virtual E_CODEC_STATUS <span class="hljs-title">Send<span class="hljs-params">(int32 iCmd, uint32 uiSeq, <span class="hljs-keyword">const MsgBody&amp; oMsgBody) override;
    <span class="hljs-function"><span class="hljs-keyword">virtual E_CODEC_STATUS <span class="hljs-title">Send<span class="hl
ae4
js-params">(<span class="hljs-keyword">const HttpMsg&amp; oHttpMsg, uint32 ulStepSeq) override;
    <span class="hljs-function"><span class="hljs-keyword">virtual E_CODEC_STATUS <span class="hljs-title">Recv<span class="hljs-params">(MsgHead&amp; oMsgHead, MsgBody&amp; oMsgBody) override;
    <span class="hljs-function"><span class="hljs-keyword">virtual E_CODEC_STATUS <span class="hljs-title">Recv<span class="hljs-params">(HttpMsg&amp; oHttpMsg) override;
    <span class="hljs-function"><span class="hljs-keyword">virtual E_CODEC_STATUS <span class="hljs-title">Recv<span class="hljs-params">(MsgHead&amp; oMsgHead, MsgBody&amp; oMsgBody, HttpMsg&amp; oHttpMsg) override;
    <span class="hljs-function"><span class="hljs-keyword">virtual <span class="hljs-keyword">bool <span class="hljs-title">Close<span class="hljs-params">() override;

<span class="hljs-keyword">protected:
    <span class="hljs-function"><span class="hljs-keyword">virtual <span class="hljs-keyword">int <span class="hljs-title">Write<span class="hljs-params">(CBuffer* pBuff, <span class="hljs-keyword">int&amp; iErrno) override;
    <span class="hljs-function"><span class="hljs-keyword">virtual <span class="hljs-keyword">int <span class="hljs-title">Read<span class="hljs-params">(CBuffer* pBuff, <span class="hljs-keyword">int&amp; iErrno) override;

<span class="hljs-keyword">private:
    E_SSL_CHANNEL_STATUS m_eSslChannelStatus;   <span class="hljs-comment">//åœ¨åŸºç±»m_ucChannelStatusé€šé“çŠ¶æ€åŸºç¡€ä¸Šå¢åŠ SSLé€šé“çŠ¶æ€
    <span class="hljs-keyword">bool m_bIsClientConnection;
    SSL* m_pSslConnection;

    <span class="hljs-keyword">static SSL_CTX* m_pServerSslCtx;    <span class="hljs-comment">//å½“æ‰“å¼€sslé€‰é¡¹ç¼–è¯‘ï¼Œå¯åŠ¨NebulaæœåŠ¡åˆ™è‡ªåŠ¨åˆ›å»º
    <span class="hljs-keyword">static SSL_CTX* m_pClientSslCtx;    <span class="hljs-comment">//é»˜è®¤ä¸ºç©ºï¼Œå½“æ‰“å¼€sslé€‰é¡¹ç¼–è¯‘å¹¶ä¸”ç¬¬ä¸€æ¬¡å‘èµ·äº†å¯¹å…¶ä»–SSLæœåŠ¡çš„è¿æ¥æ—¶ï¼ˆæ¯”å¦‚è®¿é—®ä¸€ä¸ªhttpsåœ°å€ï¼‰åˆ›å»º
};
</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></spa
576
n></span></span></span></span></span></span></code></pre>
<p>&emsp;&emsp;SocketChannelSslImplç±»ä¸­å¸¦overrideå…³é”®å­—çš„æ–¹æ³•éƒ½æ˜¯è¦†ç›–åŸºç±»SocketChannelImplçš„åŒåæ–¹æ³•ï¼Œä¹Ÿæ˜¯å®ç°SSLé€šä¿¡ä¸éSSLé€šä¿¡è°ƒç”¨é€æ˜çš„å…³é”®ã€‚ä¸å¸¦overrideå…³é”®å­—çš„æ–¹æ³•éƒ½æ˜¯SSLé€šä¿¡ç›¸å…³æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•é‡Œæœ‰opensslçš„å‡½æ•°è°ƒç”¨ã€‚ä¸å¸¦overrideçš„æ–¹æ³•ä¸­æœ‰é™æ€å’Œéé™æ€ä¹‹åˆ†ï¼Œé™æ€æ–¹æ³•åœ¨è¿›ç¨‹ä¸­åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œä¸å…·ä½“Channelå¯¹è±¡æ— å…³ã€‚SocketChannelå¤–éƒ¨ä¸éœ€è¦è°ƒç”¨éé™æ€çš„sslç›¸å…³æ–¹æ³•ã€‚</p>
<p>&emsp;&emsp;å› ä¸ºæ˜¯éé˜»å¡çš„socketï¼ŒSSL_do_handshake()å’ŒSSL_write()ã€SSL_read()è¿”å›å€¼å¹¶ä¸å®Œå…¨èƒ½åˆ¤æ–­æ˜¯å¦å‡ºé”™ï¼Œè¿˜éœ€è¦SSL_get_error()è·å–é”™è¯¯ç ã€‚SSL_ERROR_WANT_READå’ŒSSL_ERROR_WANT_WRITEéƒ½æ˜¯æ­£å¸¸çš„ã€‚</p>
<p>&emsp;&emsp;ç½‘ä¸Šçš„å¤§éƒ¨åˆ†opensslä¾‹å­ç¨‹åºæ˜¯æŒ‰é¡ºåºè°ƒç”¨opensslå‡½æ•°ç®€å•å®ç°åŒæ­¥sslé€šä¿¡ï¼Œåœ¨éé˜»å¡IOåº”ç”¨ä¸­ï¼Œsslé€šä¿¡è¦å¤æ‚è®¸å¤šã€‚SocketChannelSslImplå®ç°çš„æ˜¯éé˜»å¡çš„sslé€šä¿¡ï¼Œä»è¯¥ç±»çš„å®ç°ä¸Šçœ‹æ•´ä¸ªé€šä¿¡è¿‡ç¨‹å¹¶éå®Œå…¨çº¿æ€§çš„ã€‚ä¸‹é¢çš„SSLé€šä¿¡å›¾æ›´æ¸…æ™°åœ°è¯´æ˜äº†Nebulaæ¡†æ¶ä¸­SSLé€šä¿¡æ˜¯å¦‚ä½•å®ç°çš„ï¼š</p>
<p><img title="Nebula_ssl" src="https://oscimg.oschina.net/oscnet/e6f58a56d4fbcf9dbc3c4a1d9c3fdbb970e.jpg" alt="Nebula_ssl" /></p>
<p>&emsp;&emsp;SocketChannelSslImplä¸­çš„é™æ€æ–¹æ³•åœ¨è¿›ç¨‹ç”Ÿå‘½æœŸå†…åªéœ€è°ƒç”¨ä¸€æ
aec
¬¡ï¼Œä¹Ÿå¯ä»¥ç†è§£æˆSSL_CTX_new()ã€SSL_CTX_free()ç­‰æ–¹æ³•åªéœ€è°ƒç”¨ä¸€æ¬¡ã€‚æ›´è¿›ä¸€æ­¥ç†è§£SSL_CTXç»“æ„ä½“åœ¨è¿›ç¨‹å†…åªéœ€è¦åˆ›å»ºä¸€æ¬¡ï¼ˆåœ¨Nebulaä¸­åˆ†åˆ«ä¸ºServerå’ŒClientå„åˆ›å»ºä¸€ä¸ªï¼‰å°±å¯ä»¥ä¸ºæ‰€æœ‰SSLè¿æ¥æ‰€ç”¨ï¼›å½“ç„¶ï¼Œä¸ºæ¯ä¸ªSSLè¿æ¥åˆ›å»ºç‹¬ç«‹çš„SSL_CTXä¹Ÿæ²¡é—®é¢˜ï¼ˆNebula 0.4ä¸­å®æµ‹è¿‡ä¸ºæ¯ä¸ªClientåˆ›å»ºç‹¬ç«‹çš„SSL_CTXï¼‰ï¼Œä½†ä¸€èˆ¬ä¸è¿™ä¹ˆåšï¼Œå› ä¸ºè¿™æ ·ä¼šæ¶ˆè€—æ›´å¤šçš„å†…å­˜èµ„æºï¼Œå¹¶ä¸”æ•ˆç‡ä¹Ÿä¼šæ›´ä½ã€‚</p>
<p>&emsp;&emsp;å»ºç«‹SSLè¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯è°ƒç”¨SSL_connect()ï¼ŒæœåŠ¡ç«¯è°ƒç”¨SSL_accept()ï¼Œè®¸å¤šopensslçš„demoéƒ½æ˜¯è¿™ä¹ˆç”¨çš„ã€‚Nebulaä¸­ç”¨çš„æ˜¯SSL_do_handshake()ï¼Œè¿™ä¸ªæ–¹æ³•åŒæ—¶é€‚ç”¨äºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼Œåœ¨å…¼å…·clientå’ŒserveråŠŸèƒ½çš„æœåŠ¡æ›´é€‚åˆç”¨SSL_do_handshake()ã€‚æ³¨æ„è°ƒç”¨SSL_do_handshake()å‰ï¼Œå¦‚æœæ˜¯clientç«¯éœ€è¦å…ˆè°ƒç”¨SSL_set_connect_state()ï¼Œå¦‚æœæ˜¯serverç«¯åˆ™éœ€è¦å…ˆè°ƒç”¨SSL_set_accept_state()ã€‚éé˜»å¡IOä¸­ï¼ŒSSL_do_handshake()å¯èƒ½éœ€è¦è°ƒç”¨å¤šæ¬¡æ‰èƒ½å®Œæˆæ¡æ‰‹ï¼Œå…·ä½“è°ƒç”¨æ—¶æœºéœ€æ ¹æ®SSL_get_error()è·å–é”™è¯¯ç SSL_ERROR_WANT_READå’ŒSSL_ERROR_WANT_WRITEåˆ¤æ–­éœ€ç›‘å¬è¯»äº‹ä»¶è¿˜æ˜¯å†™äº‹ä»¶ï¼Œåœ¨å¯¹åº”äº‹ä»¶è§¦å‘æ—¶å†æ¬¡è°ƒç”¨SSL_do_handshake()ã€‚è¯¦ç»†å®ç°è¯·å‚è€ƒSocketChannelSslImplçš„Sendå’ŒRecvæ–¹æ³•ã€‚</p>
<p>&emsp;&emsp;å…³é—­SSLè¿æ¥æ—¶å…ˆè°ƒç”¨SSL_shutdown()æ­£å¸¸å…³é—­SSLå±‚è¿æ¥ï¼ˆéé˜»å¡IOä¸­SSL_shutdown()äº¦å¯èƒ½éœ€è¦è°ƒç”¨å¤šæ¬¡ï¼‰å†è°ƒç”¨SSL_free()é‡Šæ”¾SSLè¿æ¥èµ„æºï¼Œæœ€åå…³é—­socketè¿æ¥ã€‚SSL_CTXæ— é¡»é‡Šæ”¾ã€‚æ•´ä¸ªSSLé€šä¿¡é¡ºåˆ©å®Œæˆï¼ŒNebula 0.4åœ¨å¼€å¤šä¸ªç»ˆç«¯ç”¨shellè„šæœ¬æ­»å¾ªç¯è°ƒç”¨curlç®€å•å‹æµ‹ä¸­SSL clientå’ŒSSL serveråŠŸèƒ½ä¸€åˆ‡æ­£å¸¸:</p>
<pre><code class="hljs bash"><span class="hljs-keyword">while :
<span class="hljs-keyword">do 
     curl -v -k -H <span class="hljs-string">"Content-Type:application/json" -X POST -d <span class="hljs-string">'{"hello":"nebula ssl test"}' https://192.168.157.168:16003/test_ssl 
<span class="hljs-keyword">done
</span></span></span></span></span></code></pre>
<p>&emsp;&emsp;æµ‹è¯•æ–¹æ³•å¦‚ä¸‹å›¾ï¼š</p>
<p><img title="ssl_test" src="https://oscimg.oschina.net/oscnet/2a0a60a927c7ca348df285e6299987aab10.jpg" alt="ssl_test" /></p>
<p>&emsp;&emsp;æŸ¥çœ‹èµ„æºä½¿ç”¨æƒ…å†µï¼ŒSSL Serverç«¯çš„å†…å­˜ä½¿ç”¨ä¸€ç›´åœ¨å¢é•¿ï¼Œç–‘ä¼¼æœ‰å†…å­˜æ³„æ¼ï¼Œä¸è¿‡pmap -dæŸ¥çœ‹æŸä¸€é¡¹anonå†…å­˜è¾¾åˆ°è¿‘18MBæ—¶ä¸å†å¢é•¿ï¼Œè¯´æ˜å¯èƒ½ä¸æ˜¯å†…å­˜æ³„æ¼ï¼Œåªæ˜¯éƒ¨åˆ†å†…å­˜è¢«opensslå½“ä½œcacheä½¿ç”¨äº†ã€‚è¿™ä¸ªé—®é¢˜ç½‘ä¸Šæ²¡æ‰¾åˆ°è§£å†³åŠæ³•ã€‚ä»struct ssl_ctx_stç»“æ„ä½“å®šä¹‰å‘ç°ç«¯å€ªï¼Œå†ä»nginxæºç ä¸­å‘ç°äº†SSL_CTX_remove_session()ï¼Œäºæ˜¯åœ¨SSL_free()ä¹‹å‰åŠ ä¸ŠSSL_CTX_remove_session()ã€‚sessionå¤ç”¨å¯ä»¥æé«˜SSLé€šä¿¡æ•ˆç‡ï¼Œä¸è¿‡Nebulaæš‚æ—¶ä¸éœ€è¦ã€‚</p>
<p>&emsp;&emsp;è¿™ç§æµ‹è¯•æ–¹æ³•æŠŠNebulaI
1062
nterfaceä½œä¸ºSSLæœåŠ¡ç«¯ï¼ŒNebulaLogicä½œä¸ºSSLå®¢æˆ·ç«¯ï¼ŒåŒæ—¶å®Œæˆäº†Nebulaæ¡†æ¶SSLæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯åŠŸèƒ½æµ‹è¯•ï¼Œç®€å•çš„å‹åŠ›æµ‹è¯•ã€‚Nebulaæ¡†æ¶çš„SSLé€šä¿¡æµ‹è¯•é€šè¿‡ï¼Œä¹Ÿå¯ä»¥æŠ•å…¥ç”Ÿäº§åº”ç”¨ï¼Œåœ¨åç»­åº”ç”¨ä¸­è‚¯å®šè¿˜ä¼šç»§ç»­å®Œå–„ã€‚opensslçœŸçš„éš¾ç”¨ï¼Œéš¾æ€ªè¢«åæ§½é‚£ä¹ˆå¤šï¼Œæˆ–è®¸ä¸ä¹…ä¹‹åçš„Nebulaç‰ˆæœ¬å°†ç”¨å…¶ä»–sslåº“æ›¿æ¢æ‰opensslã€‚</p>
<h3 id="h3_11">5. ç»“æŸ</h3>
<p>&emsp;&emsp;åŠ ä¸ŠSSLæ”¯æŒçš„Nebulaæ¡†æ¶æµ‹è¯•é€šè¿‡ï¼Œè™½ç„¶ä¸ç®—å¤ªå¤æ‚ï¼Œä½†è¿‡ç¨‹è¿˜æ˜¯è›®æ›²æŠ˜ï¼Œè€—æ—¶ä¹ŸæŒºé•¿ã€‚è¿™é‡ŒæŠŠNebulaä½¿ç”¨opensslå¼€å‘SSLé€šä¿¡åˆ†äº«å‡ºæ¥ï¼Œå¸Œæœ›å¯¹å‡†å¤‡ä½¿ç”¨opensslçš„å¼€å‘è€…æœ‰ç”¨ã€‚å¦‚æœè§‰å¾—æœ¬æ–‡å¯¹ä½ æœ‰ç”¨ï¼Œåˆ«å¿˜äº†åˆ°Nebulaçš„<a href="https://github.com/Bwar/Nebula">Github</a>æˆ–<a href="https://gitee.com/Bwar/Nebula">ç äº‘</a>ç»™ä¸ªstarï¼Œè°¢è°¢ã€‚</p>
<p>&lt;br/&gt;</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><a href="http://www.cppblog.com/qinqing1984/archive/2014/04/11/206536.aspx">åŸºäºOpenSSLå®ç°çš„å®‰å…¨è¿æ¥</a></li>
<li><a href="https://www.openssl.org/docs/man1.1.0/ssl/">SSL APIæ–‡æ¡£</a></li>
<li><a href="https://blog.csdn.net/hellopaul8597/article/details/52327730">Httpsåè®®è¯¦è§£</a></li>
<li><a href="https://blog.csdn.net/wetest_tencent/article/details/53425198">HTTPSæ˜¯å¤§åŠ¿æ‰€è¶‹ï¼Ÿçœ‹è…¾è®¯ä¸“å®¶é€šè¿‡Epoll+OpenSSLåœ¨é«˜å¹¶å‘å‹æµ‹æœºå™¨äººä¸­æ”¯æŒhttps</a></li>
<li><a href="https://wenku.baidu.com/view/74575278ed630b1c58eeb517.html">openssl ç¼–ç¨‹å…¥é—¨(å«å®Œæ•´ç¤ºä¾‹)</a></li>
<li><a href="https://blog.csdn.net/jinhill/article/details/3615626">SSLè¿æ¥å»ºç«‹è¿‡ç¨‹åˆ†æ</a></li>
<li><a href="https://blog.csdn.net/pony_maggie/article/details/51315946">SSL socket é€šè®¯è¯¦è§£</a></li>
<li><a href="https://www.jianshu.com/p/c93612b3abac">HTTPSä»åŸç†åˆ°åº”ç”¨(ä¸‰)ï¼šSSL/TLSåè®®</a></li>
<li><a href="http://blog.jobbole.com/94332/">SSL/TLS æ¡æ‰‹ä¼˜åŒ–è¯¦è§£</a></li>
<li><a href="http://www.cnblogs.com/dongfuye/p/4121066.html">éé˜»å¡/å¼‚æ­¥(epoll) openssl</a></li>
<li><a href="https://my.oschina.net/vincentwy/blog/620282?p=1">ä¸¤ä¸ªåŸºäºopensslçš„https clientä¾‹å­</a></li>
<li><a href="https://blog.csdn.net/howeverpf/article/details/18993945">OpenSSLç¼–ç¨‹åˆæ¢1 --- ä½¿ç”¨OpenSSL APIå»ºç«‹SSLé€šä¿¡çš„ä¸€èˆ¬æµç¨‹ç®€ä»‹</a></li>
<li><a href="https://blog.csdn.net/howeverpf/article/details/14108063">OpenSSLç¼–ç¨‹åˆæ¢2 --- å…³äºè¯ä¹¦æ–‡ä»¶çš„åŠ è½½</a></li>
</ul>
</div>
<div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
    <div id="blog_post_info"></div>
    <div class="clear"></div>
    <div id="post_next_prev"></div>
</div>
            </div>
            <div class="postDesc">posted @ 
<span id="post-date">2018-10-30 21:58</span>&nbsp;
<a href="https://www.cnblogs.com/bwar/">é“èŠ’ç®•</a>&nbsp;
é˜…è¯»(<span id="post_view_count">...</span>)&nbsp;
è¯„è®º(<span id="post_comment_count">...</span>)&nbsp;
<a href="https://i.cnblogs.com/EditPosts.aspx?postid=9879893" rel="nofollow">ç¼–è¾‘</a>&nbsp;
<a href="javascript:void(0)" onclick="AddToWz(9879893);return false;">æ”¶è—</a></div>
        </div>
	    
	    
    </div><!--end: topics æ–‡ç« ã€è¯„è®ºå®¹å™¨-->
</div>
<script src="https://common.cnblogs.com/highlight/9.12.0/highlight.min.js"></script>
<script>markdown_highlight();</script>
<script>
    var allowComments = true, cb_blogId = 437464, cb_blogApp = 'bwar', cb_blogUserGuid = 'ab6f1dec-a863-4461-bbb5-08d5cabb872d';
    var cb_entryId = 9879893, cb_entryCreatedDate = '2018-10-30 21:58', cb_postType = 1; 
    loadViewCount(cb_entryId);
</script><a name="!comments"></a>
<div id="blog-comments-placeholder"></div>
<script>
    var commentManager = new blogCommentManager();
    commentManager.renderComments(0);
</script>

<div id="comment_form" class="commentform">
    <a name="commentform"></a>
    <div id="divCommentShow"></div>
    <div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">åˆ·æ–°è¯„è®º</a><a href="#" onclick="return RefreshPage();">åˆ·æ–°é¡µé¢</a><a href="#top">è¿”å›é¡¶éƒ¨</a></div>
    <div id="comment_form_con
aec
tainer"></div>
    <div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
    <div id="ad_t2"></div>
    <div id="opt_under_post"></div>
    <script async="async" src="https://www.googletagservices.com/tag/js/gpt.js"></script>
    <script>
        var googletag = googletag || {};
        googletag.cmd = googletag.cmd || [];
    </script>
    <script>
        googletag.cmd.push(function () {
            googletag.defineSlot("/1090369/C1", [300, 250], "div-gpt-ad-1546353474406-0").addService(googletag.pubads());
            googletag.defineSlot("/1090369/C2", [468, 60], "div-gpt-ad-1539008685004-0").addService(googletag.pubads());
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
    </script>
    <div id="cnblogs_c1" class="c_ad_block">
        <div id="div-gpt-ad-1546353474406-0" style="height:250px; width:300px;"></div>
    </div>
    <div id="under_post_news"></div>
    <div id="cnblogs_c2" class="c_ad_block">
        <div id="div-gpt-ad-1539008685004-0" style="height:60px; width:468px;">
            <script>
                if (new Date() >= new Date(2018, 9, 13)) {
                    googletag.cmd.push(function () { googletag.display("div-gpt-ad-1539008685004-0"); });
                }
            </script>
        </div>
    </div>
    <div id="under_post_kb"></div>
    <div id="HistoryToday" class="c_ad_block"></div>
    <script type="text/javascript">
        fixPostBody();
setTimeout(function() { incrementViewCount(cb_entryId); }, 50);        deliverAdT2();
        deliverAdC1();
        deliverAdC2();
        loadNewsAndKb();
        loadBlogSignature();
LoadPostCategoriesTags(cb_blogId, cb_entryId);        LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
        GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
        loadOptUnderPost();
        GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
    </script>
</div>
	</div><!--end: forFlow -->
	</div><!--end: mainContent ä¸»ä½“å†…å®¹å®¹å™¨-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<div id="sidebar_news" class="newsItem">
            <script>loadBlogNews();</script>
</div>

			<div id="blog-calendar" style="display:none"></div><script>loadBlogDefaultCalendar();</script>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"></div>
                    <script>loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar ä¾§è¾¹æ å®¹å™¨ -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		<!--done-->
Copyright &copy; 2020 é“èŠ’ç®•
<br /><span id="poweredby">Powered by .NET Core 3.1.1 on Linux</span>



	</div><!--end: footer -->
</div><!--end: home 
33
è‡ªå®šä¹‰çš„æœ€å¤§å®¹å™¨ -->


    
</body>
</html>
0


